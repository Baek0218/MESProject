<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">



<mapper namespace="com.itwillbs.mappers.performMapper">
  
	<select id="InstruList" resultType="com.itwillbs.work.domain.InstruListDTO">
	select 
	instr_id as instrId, 
	line_cd as lineCd, 
	line_nm as lineName, 
	item_num as itemNum, 
	item_nm as itemName, 
	work_sts as workSts, 
	work_dt as workDate, 
	work_qty as workQty, 
	ord_num as ordNum,
	clnt_nm as ClientName
	from prfrm1_view
	</select>
   
   
   <!--     https://mybatis.org/mybatis-3/sqlmap-xml.html -->
    <resultMap type="map" id="InstrLiMap">
    
<!--     column= "디비열이름" property="멤버변수이름" -->
    <id column="id" property=""/>
    <result column="instr_id" property="instrId"/>
    <result column="line_cd" property="lineCd"/>
    <result column="line_nm" property="lineName"/>
    <result column="item_num" property="itemNum"/>
    <result column="item_nm" property="itemName"/>
    <result column="work_sts" property="workSts"/>
    <result column="work_dt" property="workDate"/>
    <result column="work_qty" property="workQty"/>
    <result column="ord_num" property="ordNum"/>
    <result column="clnt_nm" property="ClientName"/>
    
    
    </resultMap>
    
    <select id="getInstrLiMap" resultMap="InstrLiMap">
    select 
	instr_id, 
	line_cd, 
	line_nm, 
	item_num, 
	item_nm, 
	work_sts, 
	work_dt, 
	work_qty, 
	ord_num,
	clnt_nm
	from prfrm1_view
    </select>
   
   
   
   
   
   
   <select id="PerformRgList" resultType="com.itwillbs.work.domain.PerformRgDTO">
   select 
   i.item_num as itemNum, 
   i.item_nm as itemName, 
   p.prfrm_dt as performDate, 
   p.gb_yn as gbYn, 
   p.prfrm_qty as performQty, 
   p.db_rsns as dbReason
   from item i join work_prfrm p
   on i.item_id = p.item_id
   where p.instr_id = #{instrId}
   
   </select>
   
   <insert id="insertPerform">
   insert into work_prfrm
   (`prfrm_id`, `instr_id`, `line_id`, `item_id`, `prfrm_dt`, `input_qty`, `gb_yn`, `prfrm_qty`, `db_rsns`, 
   `note`, `insert_id`, `insert_dt`) VALUES
   (#{prfrm_id}, 1,1,1, #{prfrm_dt}, 1, #{gb_yn}, #{prfrm_qty}, #{db_rsns}, 
   1,1, #{insert_dt})
   
   </insert>

<!--  #{instr_id}, #{line_id}, #{item_id},   #{input_qty},  #{note}, #{insert_id} -->
   	<select id="getMaxNumP" resultType="java.lang.Integer">
		select max(prfrm_id) from work_prfrm
	</select>
	
	
   
   
   
</mapper>