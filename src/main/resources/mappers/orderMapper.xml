<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.itwillbs.mappers.orderMapper">

	<resultMap type="map" id="orderMap">

		<result column="clnt_cd" property="clntCd" />
		<result column="clnt_nm" property="clntNm" />
		<result column="order_dt" property="orderDt" />
		<result column="dlvry_dt" property="dlvryDt" />
		<result column="id" property="id" />
		<result column="name" property="name" />
		<result column="csmtr_ord_num" property="csmtrOrdNum" />

	</resultMap>
	
	<select id="orderList" resultMap="orderMap">
		<include refid="List" />
	</select>
	
	<select id="orderSearch" resultMap="orderMap">
		<include refid="List" />
		<![CDATA[
 			WHERE clnt_cd LIKE CONCAT('%', #{clntCd}, '%')
			AND order_dt LIKE CONCAT('%', #{orderDt}, '%')
			AND name LIKE CONCAT('%', #{name}, '%')
			AND dlvry_dt LIKE CONCAT('%', #{dlvryDt}, '%')
 		]]>
 	</select>	
 	
	<sql id="List">
		select c.clnt_cd, c.clnt_nm, o.order_dt, o.dlvry_dt, u.id,u.name,o.csmtr_ord_num
		from client c join order_mng o
		on c.clnt_id = o.clnt_id
		join user u
		on o.user_id = u.user_id
	</sql>

</mapper>

